extends ../navbar

block content
  .view-dialog-container
    .view-dialog
      .view-dialog-header
      .view-dialog-content
        .row.mb-4
          .col-12
            h1.text-center.mb-0(style="font-size: 1.8rem; font-weight: 600; color: #2e3338;")
              i.fas.fa-cube.me-2(style="color: #4e73df;")
              | Asset Details
        hr(style="border: none; border-top: 1px solid #e3e6f0; margin: 2rem 0;")
        .view-detail-section
          h6.view-section-title
            i.fas.fa-info-circle.me-2
            | Basic Information
          .view-detail-row
            .view-detail-item
              .view-detail-label
                i.fas.fa-tag
                | Asset Name
              .view-detail-value= asset.name || 'N/A'
            .view-detail-item
              .view-detail-label
                i.fas.fa-barcode
                | Asset Tag
              .view-detail-value= asset.asset_tag || 'N/A'
          .view-detail-row
            .view-detail-item
              .view-detail-label
                i.fas.fa-barcode
                | Serial Number
              .view-detail-value= asset.serial_number || 'N/A'
            .view-detail-item
              .view-detail-label
                i.fas.fa-tags
                | Category
              .view-detail-value= asset.category ? asset.category.name : 'N/A'
          .view-detail-row
            .view-detail-item
              .view-detail-label
                i.fas.fa-cube
                | Model
              .view-detail-value= asset.model || 'N/A'
            .view-detail-item
              .view-detail-label
                i.fas.fa-industry
                | Manufacturer
              .view-detail-value= asset.manufacturer || 'N/A'
        .view-detail-section
          h6.view-section-title
            i.fas.fa-dollar-sign.me-2
            | Financial Information
          .view-detail-row
            .view-detail-item
              .view-detail-label
                i.fas.fa-calendar-alt
                | Purchase Date
              .view-detail-value= asset.purchase_date ? new Date(asset.purchase_date).toLocaleDateString('en-GB'): 'N/A'
            .view-detail-item
              .view-detail-label
                i.fas.fa-money-bill-wave
                | Purchase Cost
              .view-detail-value= asset.purchase_cost ? `$${parseFloat(asset.purchase_cost).toFixed(2)}` : 'N/A'
          .view-detail-row
            .view-detail-item
              .view-detail-label
                i.fas.fa-shield-alt
                | Warranty
              .view-detail-value
                - const warrantyYears = asset.warranty_years || (asset.warranty_months ? Math.round(asset.warranty_months / 12 * 10) / 10 : null);
                if warrantyYears
                  = warrantyYears > 0 ? `${warrantyYears} year${warrantyYears !== 1 ? 's' : ''}` : 'N/A'
                else
                  | N/A
            .view-detail-item
              .view-detail-label
                i.fas.fa-chart-line
                | Current Value
              .view-detail-value= asset.current_value ? `$${parseFloat(asset.current_value).toFixed(2)}` : 'N/A'
        .view-detail-section
          h6.view-section-title
            i.fas.fa-map-marker-alt.me-2
            | Location
          .view-detail-row
            .view-detail-item
              .view-detail-label
                i.fas.fa-building
                | Branch
              .view-detail-value= asset.branch || 'N/A'
            .view-detail-item
              .view-detail-label
                i.fas.fa-map-marker-alt
                | Location
              .view-detail-value= asset.location || 'N/A'
          .view-detail-row
            .view-detail-item
              .view-detail-label
                i.fas.fa-info-circle
                | Status
              .view-detail-value
                if asset.status
                  span.badge(class=asset.status === 'active' ? 'bg-success' : asset.status === 'inactive' ? 'bg-secondary' : asset.status === 'archived' ? 'bg-dark' : 'bg-info' style="font-size: 0.85rem; padding: 0.4rem 0.75rem;")
                    | #{asset.status.charAt(0).toUpperCase() + asset.status.slice(1)}
                else
                  .view-detail-value.text-muted N/A
        if asset.notes && asset.notes.trim()
          .view-detail-section
            .view-notes-section
              h6.view-notes-title
                i.fas.fa-sticky-note
                | Additional Notes
              .view-notes-content= asset.notes
      .view-dialog-footer
        a.view-action-btn.view-action-btn-primary(href='/assets/#{asset.id}/form')
          i.fas.fa-edit
          | Edit Asset
        a.view-action-btn.view-action-btn-secondary(href='/assets')
          i.fas.fa-list
          | Back to List